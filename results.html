<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background-color: #2b2b2b;
      color: white;
      margin: 0;
      padding: 0;
    }

    header {
      text-align: center;
      padding: 20px;
    }

    .nav {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }

    .nav a {
      padding: 10px 15px;
      background: #6c63ff;
      color: white;
      text-decoration: none;
      border-radius: 6px;
      font-weight: bold;
    }

    .mode-toggle {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .mode-toggle button {
      padding: 10px 15px;
      border: none;
      border-radius: 6px;
      background: #007bff;
      color: white;
      cursor: pointer;
    }

    .mode-toggle button:hover {
      background: #0056b3;
    }

    .leaderboard, .infographic {
      display: none;
      max-width: 1000px;
      margin: auto;
    }

    .candidate-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: #3a3a3a;
      padding: 10px 15px;
      border-radius: 10px;
      margin: 8px 0;
      flex-wrap: wrap;
      box-shadow: 0 0 5px rgba(0,0,0,0.4);
    }

    .candidate-row img {
      width: 50px;
      height: 50px;
      border-radius: 6px;
      object-fit: cover;
      margin-right: 10px;
    }

    .candidate-info {
      flex: 1;
      font-size: 16px;
    }

    .vote-percent {
      background: red;
      padding: 6px 12px;
      border-radius: 6px;
      font-weight: bold;
      min-width: 70px;
      text-align: center;
    }

    .infographic {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }

    .info-card {
      background: #3a3a3a;
      border-radius: 10px;
      padding: 20px;
      width: 100%;
      max-width: 280px;
      text-align: center;
      margin: 10px;
      position: relative;
      box-shadow: 0 0 8px rgba(0,0,0,0.3);
    }

    .info-card img {
      width: 100px;
      height: 100px;
      border-radius: 6px;
      object-fit: cover;
      margin-bottom: 10px;
      border: 3px solid #007bff;
    }

    .info-card h3 {
      margin: 0;
      font-size: 18px;
    }

    .info-card p {
      margin: 5px 0;
      font-weight: bold;
      color: #dc3545;
    }

    .medal {
      position: absolute;
      top: -10px;
      right: -10px;
      font-size: 20px;
    }

    @media (max-width: 600px) {
      .candidate-row {
        flex-direction: column;
        align-items: flex-start;
      }

      .info-card {
        width: 90%;
      }
    }
  </style>
</head>
<body>

  <header>
    <h1>üìä ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï</h1>
  </header>

  <div class="nav">
    <a href="login.html">üîê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô</a>
    <a href="index.html">üó≥Ô∏è ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏´‡∏ß‡∏ï</a>
  </div>

  <div class="mode-toggle">
    <button onclick="switchView('leaderboard')">üìã Leaderboard</button>
    <button onclick="switchView('infographic')">üßæ Infographic</button>
  </div>

  <div id="leaderboard" class="leaderboard"></div>
  <div id="infographic" class="infographic"></div>

  <script>
    const candidates = [];
    const votes = JSON.parse(localStorage.getItem("votes") || "{}");

    candidates.push({ id: 1, name: "‡∏ã‡∏≤‡∏£‡πà‡∏≤", image: "Mohamed_Salah_2018.jpg" });
    for (let i = 2; i <= 150; i++) {
      candidates.push({
        id: i,
        name: `‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£ ${i}`,
        image: "../assets/eth5.jpg"
      });
    }

    let totalVotes = 0;
    candidates.forEach(c => {
      c.voteCount = votes[c.id] || 0;
      totalVotes += c.voteCount;
    });

    candidates.forEach(c => {
      c.percent = totalVotes > 0 ? ((c.voteCount / totalVotes) * 100).toFixed(2) : "0.00";
    });

    candidates.sort((a, b) => b.voteCount - a.voteCount);

    function buildViews() {
      const lb = document.getElementById("leaderboard");
      const ig = document.getElementById("infographic");

      candidates.forEach((c, i) => {
        // Leaderboard
        const row = document.createElement("div");
        row.className = "candidate-row";
        row.innerHTML = `
          <strong>#${i + 1}</strong>
          <img src="${c.image}" alt="">
          <div class="candidate-info">${c.name}</div>
          <div class="vote-percent">${c.percent}%</div>
        `;
        lb.appendChild(row);

        // Infographic (Top 10 ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
        if (i < 10) {
          const card = document.createElement("div");
          card.className = "info-card";
          const medal = i === 0 ? 'ü•á' : i === 1 ? 'ü•à' : i === 2 ? 'ü•â' : '';
          card.innerHTML = `
            ${medal ? `<div class="medal">${medal}</div>` : ''}
            <img src="${c.image}" alt="">
            <h3>${c.name}</h3>
            <p>${c.percent}% (${c.voteCount} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)</p>
          `;
          ig.appendChild(card);
        }
      });
    }

    function switchView(view) {
      document.getElementById("leaderboard").style.display = view === "leaderboard" ? "block" : "none";
      document.getElementById("infographic").style.display = view === "infographic" ? "flex" : "none";
    }

    buildViews();
    switchView("leaderboard");
  </script>
</body>
</html>
